<!doctype html>
<html class="no-js" lang="zxx">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>NarBank - Checkout</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/narwhal_logo_icon.ico">

    <!-- CSS here -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/slicknav.css">
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <link rel="stylesheet" href="assets/css/hamburgers.min.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/themify-icons.css">
    <link rel="stylesheet" href="assets/css/themify-icons.css">
    <link rel="stylesheet" href="assets/css/slick.css">
    <link rel="stylesheet" href="assets/css/nice-select.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <style>
        .contain{
            background-color:#cdf1f3;
            border:2px solid #23819d;
        }

        .right {
   
    padding: 2vh
}
        .mainForm{
            background-color:#cdf1f3;
            padding-top: 10px;
            padding-bottom:30px;
        }
        #signup{
            color:blue;
            text-decoration:underline;
        }
        .checkoutsetup{
            color:#23819d;
            font-size:30px;
            margin-top:20px;
            margin-bottom:20px;
        }
        body{
            background-image: 
            linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)),
        }
        .head{
            background-color: #cdf1f3;
        }
        .setUpButton{
            margin-bottom:20px;
        }
        .main-header{
            background: #cdf1f3;
        }
    </style>
</head>
<body onload="retrieve()">
    <!--? Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="preloader-circle"></div>
                <div class="preloader-img pere-text">
                    <img src="assets/img/logo/loder.png" alt="">
                </div>
            </div>
        </div>
    </div>
    <!-- Preloader Start -->
    <header>
        <!--Nav bar-->
<nav class="navbar fixed-top navbar-expand-lg navbar-light" style="background-color: white;">
    <div class="container">
        <a class="navbar-brand text-danger" href="Shop/Index2.html#form_container">
            <img src="./Shop/img/alan logo.png" width="70" alt="logo" class="img-fluid">
            <span class="font-weight-bold text-dark">Alan's</span>Furniture
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link pl-3" href="Shop/Index2.html#form_container">Product Catalogue
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link pl-3" href="#">NarBank Collab</a>
                </li>

                
            </ul>
            <a class="navbar-brand" href="./shoppingbag.html">
                <div class="logo-image">
                      <img src="./shop/img/shopping-cart.png" style="width:20px" class="img-fluid">
                </div>
          </a>
        </div>
    </div>
</nav>
                                  
    </header>
    <main>
        <br>
        <div class="container-fluid" style="padding: 100px;">
            <div class="row">
                <div class="col-md-7"></div>
                <div class="left">
                    
                    <p class="checkoutsetup">Payment</p>

                    <div style="margin-bottom: 10px">
                        Based on your Credit Score which is above 600, You are eligible for Buy Now Pay Later Scheme</div>
                    <div style="margin-bottom:10px"> 
                        <button id="button1" type="button" class="btn-primary" onclick="showNormbank()">Pay With Bank Card</button>
                        <button id="button2" type="button" class="btn-primary" onclick="showNarbank()">Pay with Narbank</button>
                        
                    <form class="PaymentForm" id="PaymentForm">
                        <div id="showNormBank" style="display: none; margin-top: 20px;">
                            <div class="form-group">
                                <label for="Name">Name</label>
                                <input type="text" class="form-control" name="name" id="name" placeholder="Linda Williams" value="" >
                               
                            </div>
    
                            <div class="form-group">
                                <label for="text">Account Number:</label>
                                <input type="text" class="form-control" name="num" id="num" value=""  placeholder="0125 6780 4567 9909">
                   
                            </div>

                            <div class="form-group">
                                <label for="text">Expiry Date</label>
                                <input type="text" class="form-control" name="date" id="date" value=""  input placeholder="YY/MM">
                            </div>
                            <div class="form-group">
                                <label for="text">CVV:</label>
                                <input type="text" class="form-control" name="CVV" id="CCV" value=""  input placeholder="cvv">
                            </div>
                           
                           
                                <button class="btn" id="normbankorder">Pay</button>
                            
                        </div>
                        <div id="shownarbank" style="display: none;">
                            <p>
                                <label><input type="radio" name="mth" value="3331.35" /> 2 Months Installment</label>
                                <label><input type="radio" name="mth" value="1665.67" /> 4 Months Installment</label>
                                <label><input type="radio" name="mth" value="6662.69" checked="checked"/> Full Payment</label>
                            </p>
                            
                            <p>
                               
                                <label>Total Payable Now: $ <input type="text" name="total" class="num" value="6662.69" readonly="readonly" /></label>
                            </p>
                        <div class="form-group">
                            <label for="Username">Username</label>
                            <input type="text" class="form-control" name="Username" id="Username" value="" disabled>
                            <!--There are only two ways to access this page, after logged in/after sign up-->
                            <!--Regardless of whether acc is logged in, disable this field with the user's username -->
                        </div>

                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="text" class="form-control" name="email" id="email" value="">
                            <!--allow user to change this, put the original value in the field-->
                        </div>
                        
                        <div class="form-group">
                            <label for="tBankAcc">tBank Account</label>
                            <input type="text" class="form-control" name="tBankAcc" id="tBankAcc" value="">
                            <!--allow user to change this, put the original value in the field-->
                        </div>
                        
                        <div class="form-group">
                            <label for="tBankID">tBank ID</label>
                            <input type="text" class="form-control" name="tBankID" id="tBankID" value="">
                            <!--allow user to change this, put the original value in the field-->
                        </div>
                        
                        <div class="form-group">
                            <label for="tBankPIN">tBank PIN</label>
                            <input type="password" class="form-control" name="tBankPIN" id="tBankPIN" value="">
                            <!--allow user to change this, put the original value in the field-->
                        </div>
                        
                        
                        <div class="setUpButton">
                            <a type="button" class="btn btn-primary" onclick="Custom(), thankyou()" data-toggle="modal" data-target="#exampleModalCenter">Pay</a>
                        </div>
                            </div>
                          </div> <br>
                    </form>
                </div>
                
                <div class="col-md-5">
                    <div class="right border">
                        <div class="header"><b>Order Summary</b></div>
                        <p>4 item</p>
                        <div class="row item">
                            <div class="col-4 align-self-center"><img class="img-fluid" src="Shop/img/bed1.png"></div>
                            <div class="col-8">
                                <div class="total-price" id="new_price">
                                </div>
                      
                                <script>
                                  document.getElementById('new_price').innerHTML=localStorage.getItem("price");
                    
                                </script>
                                <div class="description">
                                    <span id = 'new_product'></span>
                                  </div>
                                  <script>
                                    document.getElementById('new_product').innerHTML=localStorage.getItem("name");
                                    console.log(localStorage.getItem("name"));
                                  </script>
                                <div class="row">Qty:3</div>
                            </div>
                            
                        </div>
                        <div class="row item" style="margin-top: 10px;">
                            <div class="col-4 align-self-center"><img class="img-fluid" src="Shop/img/dt1.png"></div>
                            <div class="col-8">
                                <div class="row">$ 1019.99</div>
                                <div class="row ">Alan's 8 Seater Dining Table</div>
                                <div class="row">Qty:1</div>
                            </div>
                        </div>
                        <hr>
                        <div class="row lower">
                            <div class="col text-left">Subtotal</div>
                            <div class="col text-right">$ 6662.69</div>
                        </div>
                        <div class="row lower">
                            <div class="col text-left">Delivery</div>
                            <div class="col text-right">Free</div>
                        </div>
                        <div class="row lower">
                            <div class="col text-left"><b>Total to pay</b></div>
                            <div class="col text-right"><b>$ 6662.69</b></div>
                        </div>
                        <br>
                        <div class="setUpButton">
                            <a type="button" class="btn btn-primary" a href="./Shop/Index2.html#form_container">Back To Product Catalogue</a>
                        </div>
                        
                    </div>
                <div class="col-3"></div>
            </div>
        </div>
        <br>

         <!-- Modal -->
        <div class="modal fade profileModal" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Alert</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body" id="profileMsg">
                <p></p>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
            </div>
        </div>

    </main>
  
         
       
         </div>
       </footer>
       <script>
        //if click onto narbank 
        function showNarbank() {
        document.getElementById('shownarbank').style.display = "block";
        document.getElementById('showNormBank').style.display = "none";
    }
    
        // if click onto normal bank 
        function showNormbank() {
        document.getElementById('showNormBank').style.display = "block";
        document.getElementById('shownarbank').style.display = "none";
    }



    // get list of radio buttons with name 'size'
var sz = document.forms['PaymentForm'].elements['mth'];

// loop through list
for (var i=0, len=sz.length; i<len; i++) {
    sz[i].onclick = function() { // assign onclick handler function to each
        // put clicked radio button's value in total field
        this.form.elements.total.value = this.value;
    };
}
    
 
        var ApiURL = "http://tbankonline.com/SMUtBank_API/Gateway";
        function getApiURL() {
            return ApiURL;
        }

        function Custom() {
            price = 6662.69;
            choiceArray = [2,4];
            choice = 1;
            to = 8610;
            var username = document.getElementById("Username").value;
            var email = document.getElementById("email").value;
            var tBankAcc = document.getElementById("tBankAcc").value;
            var tBankID = document.getElementById("tBankID").value;
            var tBankPIN = document.getElementById("tBankPIN").value;
            //var creditScore = document.getElementById("creditScore").value;
            var transactionAmount = price / choiceArray[choice];
            var transactionReferenceNumber = tBankAcc+to;
            var narrative = "This is a " + choiceArray[choice] + " 4 months interest free loan";

            
            var serviceName = "creditTransfer";
            var headerObj = {
                    Header: {
                        serviceName: serviceName,
                        userID: tBankID,
                        PIN: tBankPIN,
                        OTP: "999999"
                    }
                };
            var contentObj = {
                    Content: {
                        accountFrom: tBankAcc,
                        accountTo: to,
                        transactionAmount: transactionAmount,
                        transactionReferenceNumber: transactionReferenceNumber,
                        narrative: narrative
                    }
                };
        
            var header = JSON.stringify(headerObj);
            var content = JSON.stringify(contentObj);
            var xmlHttp = new XMLHttpRequest();
                if (xmlHttp === null){
                    alert("Browser does not support HTTP request.");
                    return;
                }
                xmlHttp.open("POST", getApiURL()+"?Header="+header+"&Content="+content, true);
                xmlHttp.timeout = 5000;

                // setup http event handlers
                xmlHttp.onreadystatechange = function() {
                    if (xmlHttp.readyState === 4 && xmlHttp.status === 200) {
                        responseObj = JSON.parse(xmlHttp.responseText);
                        serviceRespHeader = responseObj.Content.ServiceResponse.ServiceRespHeader;
                        globalErrorID = serviceRespHeader.GlobalErrorID;
                        if (globalErrorID === "010041"){
                            console.log("get otp")
                            return;
                        }
                        else if (globalErrorID !== "010000"){
                            console.log(serviceRespHeader.ErrorDetails);
                            return;
                        }
                        
                        // get data
                        transactionID = responseObj.Content.ServiceResponse.TransactionID._content_;
                        balanceBefore = responseObj.Content.ServiceResponse.BalanceBefore._content_;
                        balanceAfter = responseObj.Content.ServiceResponse.BalanceAfter._content_;

                        console.log(transactionID);
                        console.log(balanceBefore);
                        console.log(balanceAfter);

                        // display data
                        // document.getElementById("transactionID").value = transactionID;
                        // document.getElementById("balanceBefore").value = addCommas(balanceBefore);
                        // document.getElementById("balanceAfter").value = addCommas(balanceAfter);
                        
                        // enable Send button
                        document.getElementById("Send").disabled = false;
                    }
                };
                xmlHttp.ontimeout = function (e) {
                    console.log("Timeout invoking API.");
                    return;
                };					

                // send the http request
                xmlHttp.send();
        }

        function thankyou(){
            document.location.href = './shop/thankyou.html';
        }
    </script>
    <!-- JS here -->
    <script type="text/javascript" src="./assets/js/checkStatus.js"></script>
    <script type="text/javascript" src="./assets/js/logout.js"></script>
    <script type="text/javascript" src="./assets/js/profile.js"></script>
    
    <script src="./assets/js/vendor/modernizr-3.5.0.min.js"></script>
    <!-- Jquery, Popper, Bootstrap -->
    <script src="./assets/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="./assets/js/popper.min.js"></script>
    <script src="./assets/js/bootstrap.min.js"></script>
    <!-- Jquery Mobile Menu -->
    <script src="./assets/js/jquery.slicknav.min.js"></script>
    
    <!-- Jquery Slick , Owl-Carousel Plugins -->
    <script src="./assets/js/owl.carousel.min.js"></script>
    <script src="./assets/js/slick.min.js"></script>
    <!-- One Page, Animated-HeadLin -->
    <script src="./assets/js/wow.min.js"></script>
    <script src="./assets/js/animated.headline.js"></script>
    <script src="./assets/js/jquery.magnific-popup.js"></script>
    
    <!-- Date Picker -->
    <script src="./assets/js/gijgo.min.js"></script>
    <!-- Nice-select, sticky -->
    <script src="./assets/js/jquery.nice-select.min.js"></script>
    <script src="./assets/js/jquery.sticky.js"></script>
    
    <!-- counter , waypoint, Hover Direction -->
    <script src="./assets/js/jquery.counterup.min.js"></script>
    <script src="./assets/js/waypoints.min.js"></script>
    <script src="./assets/js/jquery.countdown.min.js"></script>
    <script src="./assets/js/hover-direction-snake.min.js"></script>
    
    <!-- contact js -->
    <script src="./assets/js/contact.js"></script>
    <script src="./assets/js/jquery.form.js"></script>
    <script src="./assets/js/jquery.validate.min.js"></script>
    <script src="./assets/js/mail-script.js"></script>
    <script src="./assets/js/jquery.ajaxchimp.min.js"></script>
    
    <!-- Jquery Plugins, main Jquery -->	
    <script src="./assets/js/plugins.js"></script>
    <script src="./assets/js/main.js"></script>
    
</body>

</html>
